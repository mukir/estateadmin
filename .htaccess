DirectoryIndex index.php

RewriteEngine On 

# Force canonical host (redirect www.awasam.com -> awasam.com)
RewriteCond %{HTTP_HOST} ^www\.awasam\.com$ [NC]
RewriteRule ^(.*)$ https://awasam.com/$1 [L,R=301]

# Strip explicit /public and /public/index.php from requested URLs
RewriteRule ^public(?:/index\.php)?/?(.*)$ https://%{HTTP_HOST}/$1 [L,R=301,NC,NE]

# Allow WordPress installed at project root in /blog
# If server DocumentRoot is the repo root, prevent /blog from being rewritten into /public
RewriteRule ^blog(/.*)?$ - [L,NC]

RewriteRule ^$ public/index.php [L]
RewriteRule ^((?!public/|blog/).*)$ public/$1 [L,NC]
